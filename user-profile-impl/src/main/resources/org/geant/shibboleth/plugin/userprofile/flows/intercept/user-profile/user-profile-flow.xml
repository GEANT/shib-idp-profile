<flow xmlns="http://www.springframework.org/schema/webflow"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow.xsd"
          parent="intercept.abstract">

        <!-- Rudimentary impediment to direct execution of subflow. -->
        <input name="calledAsSubflow" type="boolean" required="true" />

        <action-state id="SetEvent">
           <evaluate expression="flowRequestContext.getActiveFlow().getApplicationContext().getBean('org.geant.shibboleth.plugin.userprofile.setEvents').apply(opensamlProfileRequestContext)" />
           <evaluate expression="'proceed'" />
           <transition on="proceed" to="proceed" />
        </action-state>

        <bean-import resource="user-profile-beans.xml" />

</flow>